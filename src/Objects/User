<?php
namespace App\Objects;

use App\Enums\Role;

class User
{
    public function __construct(
        public int $id,
        public string $fullname,
        public string $email,
        public Role $role,
        private ?string $passwordHash = null // kept private so it can't leak
    ) {}

    public static function fromArray(array $row): self
    {
        return new self(
            id:        (int)$row['id'],
            fullname:  (string)$row['fullname'],
            email:     (string)$row['email'],
            role:      Role::from((int)$row['role_id']),
        );
    }


    public function toArray(): array
    {
        return [
            'id'        => $this->id,
            'fullname'  => $this->fullname,
            'email'     => $this->email,
            'role'      => $this->role->name // or ->value
        ];
    }
}
